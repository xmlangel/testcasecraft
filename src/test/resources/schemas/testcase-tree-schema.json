{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "array",
  "items": { "$ref": "#/definitions/testcase" },
  "definitions": {
    "testcase": {
      "type": "object",
      "required": [
        "id",
        "projectId",
        "name",
        "type",
        "displayOrder",
        "createdAt",
        "updatedAt",
        "children"
      ],
      "properties": {
        "id": { "type": "string", "format": "uuid" },
        "projectId": { "type": "string", "format": "uuid" },
        "name": { "type": "string", "maxLength": 200 },
        "type": {
          "type": "string",
          "enum": ["folder", "testcase"]
        },
        "description": { "type": ["string", "null"] },
        "preCondition": { "type": ["string", "null"] },
        "steps": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["stepNumber", "description"],
            "properties": {
              "stepNumber": { "type": "integer", "minimum": 1 },
              "description":  { "type": ["string", "null"] },
              "expectedResult": { "type": ["string", "null"] }
            }
          }
        },
        "expectedResults": { "type": ["string", "null"] },
        "parentId": {
          "type": ["string", "null"],
          "format": "uuid"
        },
        "displayOrder": {
          "type": "integer",
          "minimum": 1
        },
        "displayNumber": {
          "type": "integer",
          "minimum": 0
        },
        "createdAt": {
          "type": "string",
          "pattern": "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?$"
        },
        "updatedAt": {
          "type": ["string", "null"],
          "pattern": "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?$"
        },
        "children": {
          "type": "array",
          "items": { "$ref": "#/definitions/testcase" }
        },
        "parentName": {
          "type": ["string", "null"],
          "maxLength": 100
        }
      },
      "additionalProperties": false
    }
  }
}
